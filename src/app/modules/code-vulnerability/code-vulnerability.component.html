<div class="container-fluid text-center p-2 bg-body-tertiary">
  <form [formGroup]="githubDetailsForm">



    <div class="row">
      <div class="col col-sm-4 bg-white border mx-1" style="border-radius:10px;">
        <div class="container-fluid border mr-2 p-2 mt-2 fs-5 fw-semibold"
          style="color: white;border-radius: 10px;background-image: linear-gradient(to right, #8E2DE2, #8E2DE2); box-shadow: 0 5px 10px rgba(45, 45, 45, 0.2)">
          Configuration
        </div>

        <div *ngIf="isApiCalled" class="spinner-border text-secondary m-5" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>

        <div *ngIf="!isApiCalled" class="container-fluid text-left border my-2 p-2"
          style="border-radius: 10px; height:auto;width: auto; box-shadow: 0 5px 10px rgba(45, 45, 45, 0.05);">
          <div class="input-group mb-4">
            <span class="input-group-text" id="basic-addon1">Github Username</span>
            <input type="text" class="form-control" placeholder="farazbangalore" aria-describedby="basic-addon1"
              disabled>
          </div>
          <div class="input-group mb-4">
            <label class="input-group-text">Select Repo</label>
            <select class="form-select" formControlName="selectedRepo" (change)="onRepoSelect()" placeholder="Select">
              <option value='' selected disabled>Choose Repo...</option>
              <option *ngFor="let repo of repoList" [value]="repo">{{repo}}</option>
            </select>
          </div>
          <div class="input-group mb-4">
            <label class="input-group-text">Select PR</label>
            <select class="form-select" formControlName="selectedPr">
              <option selected value='' disabled>Choose PR...</option>
              <option *ngFor="let repo of prList" [value]="repo">{{repo}}</option>
            </select>
          </div>

          <div class="d-grid gap-2">
            <button class="btn btn-secondary fw-semibold" (click)="getFilesForPr()" type="button"
              style="background-image:  linear-gradient(to right, #0093E9, #80D0C7); border: none;">
              <i class="bi bi-file-earmark-arrow-down"></i>
              Fetch Files</button>
          </div>
        </div>
      </div>


      <div class="col bg-white border mx-1" style="border-radius:10px;">
        <div class="container-fluid border mr-2 p-2 mt-2 fs-5 fw-semibold"
          style="color: white;border-radius: 10px;background-image: linear-gradient(to right, #4A00E0, #4A00E0); box-shadow: 0 5px 10px rgba(45, 45, 45, 0.2)">
          Files Scanning
        </div>
        <div class="container-fluid" *ngIf="isFileFetchServiceCalled" class="spinner-border text-secondary m-5"
          role="status">
          <span class="visually-hidden">Loading...</span>
        </div>

        <div *ngIf="!isFileFetchServiceCalled && !areFilesLoaded" class="container-fluid py-2">
          <p class="fst-italic pt-4">Select repository and pull request to start scanning...</p>
          <img class="center-image py-4" src="assets/img/QA.png" style="width: 20%; height: auto;">
        </div>
        <div *ngIf="!isFileFetchServiceCalled && filesList.size!==0" class="container-fluid text-left border my-2 p-2"
          style="border-radius: 10px; height:auto; box-shadow: 0 5px 10px rgba(45, 45, 45, 0.05);">
          <div class="list-group" style="text-align: left">
            <a href="{{file.value}}" target="_blank" class="list-group-item list-group-item-action"
              *ngFor="let file of filesList | keyvalue">{{file.key}}</a>
          </div>
        </div>
        <div class="container-fluid d-grid py-2 px-0">
          <button class="btn btn-secondary fw-semibold" (click)="performGitScan()" type="button"
            style="background-image:  linear-gradient(to right, #0093E9, #80D0C7); border: none;">
            <i class="bi bi-search px-1"></i>
            Perform Scan</button>
        </div>

        <div *ngIf="isAzureCallMade" class="gradient-bar my-2">
          <div style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
        </div>

      </div>
    </div>

    <div class="row" *ngIf="azureResponseMap.size!==0">
      <div class="col bg-white border mx-1 mt-2" style="border-radius:10px;">
        <div class="container-fluid border mr-2 p-2 mt-1 fs-6 fw-semibold"
          style="color: white;border-radius: 10px;background-image: linear-gradient(to right, #8E2DE2, #4A00E0); box-shadow: 0 5px 10px rgba(45, 45, 45, 0.2)">
          Analysis Report
        </div>

        <div *ngIf="!isFileFetchServiceCalled && !areFilesLoaded" class="container-fluid py-2">
          <p class="fst-italic pt-4">Select repository and pull request to start scanning...</p>
          <img class="center-image py-4" src="assets/img/QA.png" style="width: 20%; height: auto;">
        </div>

        <div class="container-fluid border my-2" *ngFor="let item of azureResponseMap | keyvalue"
          style="white-space: pre-line;text-align: left; border-radius: 10px; background-color: rgb(252, 252, 252);">
          <p class="fst-italic pt-2"><b>File Name: {{item.key}}</b></p>
          <hr>
          <p>{{item.value}}</p>
        </div>

        <div class="container-fluid py-2 px-0">
          <div class="row">
            <button class="col btn btn-secondary fw-semibold mx-2" (click)="downloadReport()" type="button"
              style="background-image:  linear-gradient(to right, #0093E9, #80D0C7); border: none;">Download Report
              <i class="bi bi-download px-1"></i>

            </button>
            <!-- <button class="col btn btn-secondary fw-semibold mx-2" (click)="mailReport()" type="button"
              style="background-image:  linear-gradient(to left, #0093E9, #80D0C7); border: none;">Share
              <i class="bi bi-share px-1"></i>
            </button> -->
          </div>

        </div>

      </div>
    </div>
  </form>
</div>